swagger: "2.0"
info:
  description: This is API to access the Merchant resources and it's characteristics
  version: 1.1.0
  title: IPP-Merchants-API
schemes:
  - https
host: qa.api.firstdata.com
basePath: /sandbox/ipp/v1
produces:
  - application/json
securityDefinitions:
  AppKey:
    type: apiKey
    description: 'Authorization value in header (obtain from developer portal)'
    name: AppKey
    in: header
tags:
  - name: merchants
    description: Basic information about Merchant
paths:
  /merchants:
    get:
      tags:
        - merchants
      summary: Get Merchants (with historical data)
      description: Returns list of Merchants, which are accessible for the user
      operationId: getMerchants
      parameters:
        - name: allianceCode
          in: query
          description: Alliance code of the merchant
          required: true
          minLength: 3
          maxLength: 50
          pattern: '^[a-zA-Z0-9]+$'
          type: string
        - name: languageCode
          in: header
          description: Language Code
          required: false
          type: string
          enum:
            - 'CS'
            - 'DA'
            - 'DE'
            - 'EN'
            - 'ES'
            - 'FR'
            - 'HU'
            - 'IT'
            - 'NL'
            - 'NO'
            - 'PL'
            - 'PT'
            - 'PT-BR'
            - 'SV'
          default: 'EN'
        - name: merchantNumber
          in: query
          description: Merchant number
          required: false
          type: string
          maxLength: 30
          pattern: '^[a-zA-Z0-9]+$'
        - name: tradeName
          in: query
          description: Merchant's Trade Name
          required: false
          type: string
          minLength: 3
          maxLength: 50
          pattern: '^[a-zA-Z0-9]+$'
        - name: address
          in: query
          description: Merchant's Address
          required: false
          type: string
          minLength: 5
          maxLength: 50
        - name: orderBy
          in: query
          description: 'Available orderBy params: merchantDesc, regionalIndustryCode, clientTypeCode, companyName, effectiveDateContract, mccCode, collectionStatusCode, salesAgentCode, regionalTaxId, workPhoneNumber, activeDate, id, state, merchantIdType, merchantTitle, merchantStatusIndicator, contactName, recurringTransactionIndicator, phoneNumber, fraudIndicator, taxId, hierarchySettlementGroup, postCode, parentOmnipaySystemNumber, shortName, ecommerceIndicator, platformCode, merchantInternalNumber, city, merchantCustomNumber, contractReasonCode, tradingDate, recUpdate, contractStatusCode, hierarchyParentId, servicePhoneNumber, tradeName, countryCode, prepaymentStartDate, parentGroupNumber, addressLines, merchantType, email, amendmentDate, recLoad, website, ompSysID, hierarchyInvoicingGroup, serviceContractCode, bussType, merchantExternalNumber, groupNumber, legalForm, expiryDateContract, privatePhoneNumber, prepaymentReservePercent, prepaymentIndicator, allianceCode, institutionNumber, baseCurrencyCode, registrationNumber, externalCategoryCode'
          required: false
          type: string
          pattern: '^[a-zA-Z0-9]+$'
        - name: orderDir
          in: query
          description: Direction for the sorting (ASC/DESC)
          required: false
          type: string
          enum:
            - ASC
            - DESC
          default: ASC
          pattern: '^[a-zA-Z]+$'
        - name: pageStart
          in: query
          description: Starting page number
          required: false
          type: integer
          default: 1
          minimum: 1
        - name: pageSize
          in: query
          description: Size of the page
          required: false
          type: integer
          default: 20
          minimum: 1
          maximum: 1000
      responses:
        200:
          description: Successful operation
          schema:
            $ref: '#/definitions/MerchantListResponse'
        400:
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            application/json:
              {
                "timestamp": "2019-12-12T17:13:39.575+0000",
                "status": 400,
                "error": "Bad Request",
                "message": "Parameters validation failed: 'merchantNumber' - size must be between 0 and 30",
                "path": "/merchants"
              }
        401:
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            application/json:
              {
                "timestamp": "2019-12-12T17:13:39.575+0000",
                "status": 401,
                "error": "Unauthorized",
                "message": "Api Key missing or Invalid Api Key provided",
                "path": "/merchants"
              }
        403:
          description: Forbidden
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            application/json:
              {
                "timestamp": "2019-12-12T17:13:39.575+0000",
                "status": 403,
                "error": "Forbidden",
                "message": "You are not authorized to board under selected alliance",
                "path": "/merchants"
              }
        404:
          description: Not Found
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            application/json:
              {
                "timestamp": "2019-12-12T17:13:39.575+0000",
                "status": 404,
                "error": "Not Found",
                "message": "The requested operation failed because a resource associated with the request could not be found",
                "path": "/merchants"
              }
        429:
          description: Too Many Requests - client has sent too many requests in a space of time (rate limiting).
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            application/json:
              {
                "timestamp": "2019-12-12T17:13:39.575+0000",
                "status": 429,
                "error": "Not Found",
                "message": "Client has sent too many requests in a space of time.",
                "path": "/merchants"
              }
        500:
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            application/json:
              {
                "timestamp": "2019-12-12T17:13:39.575+0000",
                "status": 500,
                "error": "Internal Server Error",
                "message": "The request failed due to an internal error",
                "path": "/merchants"
              }
  /merchants/{merchantId}:
    get:
      tags:
        - merchants
      summary: Get Merchants by ID (with historical data)
      description: Returns list of Merchants
      operationId: getMerchantById
      parameters:
        - name: allianceCode
          in: query
          description: Alliance code of the merchant
          required: true
          minLength: 3
          maxLength: 50
          type: string
          pattern: '^[a-zA-Z0-9]+$'
        - name: languageCode
          in: header
          description: Language Code
          required: false
          type: string
          enum:
            - 'CS'
            - 'DA'
            - 'DE'
            - 'EN'
            - 'ES'
            - 'FR'
            - 'HU'
            - 'IT'
            - 'NL'
            - 'NO'
            - 'PL'
            - 'PT'
            - 'PT-BR'
            - 'SV'
          default: 'EN'
        - name: merchantId
          in: path
          description: Internal ID of Merchant
          required: true
          type: integer
          format: int64
      responses:
        200:
          description: Successful operation
          schema:
            $ref: '#/definitions/Merchant'
        400:
          description: Bad Request
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            application/json:
              {
                "timestamp": "2019-12-12T17:13:39.575+0000",
                "status": 400,
                "error": "Bad Request",
                "message": "Invalid ID supplied",
                "path": "/merchants/12345"
              }
        401:
          description: Unauthorized
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            application/json:
              {
                "timestamp": "2019-12-12T17:13:39.575+0000",
                "status": 401,
                "error": "Unauthorized",
                "message": "Api Key missing or Invalid Api Key provided",
                "path": "/merchants/12345"
              }
        403:
          description: Forbidden
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            application/json:
              {
                "timestamp": "2019-12-12T17:13:39.575+0000",
                "status": 403,
                "error": "Forbidden",
                "message": "You are not authorized to board under selected alliance",
                "path": "/merchants/12345"
              }
        404:
          description: Not Found
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            application/json:
              {
                "timestamp": "2019-12-12T17:13:39.575+0000",
                "status": 404,
                "error": "Not Found",
                "message": "The requested operation failed because a resource associated with the request could not be found",
                "path": "/merchants/12345"
              }
        429:
          description: Too Many Requests - client has sent too many requests in a space of time (rate limiting).
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            application/json:
              {
                "timestamp": "2019-12-12T17:13:39.575+0000",
                "status": 429,
                "error": "Not Found",
                "message": "Client has sent too many requests in a space of time.",
                "path": "/merchants/12345"
              }
        500:
          description: Internal server error
          schema:
            $ref: '#/definitions/ErrorResponse'
          examples:
            application/json:
              {
                "timestamp": "2019-12-12T17:13:39.575+0000",
                "status": 500,
                "error": "Internal Server Error",
                "message": "The request failed due to an internal error",
                "path": "/merchants/12345"
              }
definitions:
  Merchant:
    type: object
    properties:
      allianceCode:
        type: string
        description: Merchant alliance code
        example: 'FISV'
      institutionNumber:
        type: string
        description: Merchant institution number
        example: '1234'
      merchantNumber:
        type: string
        description: Merchant number
        example: '12121'
      merchantInternalNumber:
        type: string
        description: Merchant internal number
        example: '54646'
      merchantCustomNumber:
        type: string
        description: Merchant custom number
        example: '546456'
      merchantType:
        type: string
        description: Merchant type
        example: 'P2'
      merchantTypeDesc:
        type: string
        description: Merchant type description
        example: 'Mer Type Desc'
      companyName:
        type: string
        description: Merchant company name
        example: 'Open 32 Apeldoorn'
      shortName:
        type: string
        description: Merchant short name
        example: 'Open 32'
      tradeName:
        type: string
        description: Merchant trade name
        example: 'Open 32 Apeldoorn'
      address:
        type: array
        items:
          type: string
          example: ['18 ESTCOURT ROAD']
        description: Merchant address
      postCode:
        type: string
        description: Merchant post code
        example: 'NR30 4JG'
      city:
        type: string
        description: Merchant city
        example: 'GREAT YARMOUTH'
      countryCode:
        type: string
        description: Merchant country code
        example: '826'
      countryCodeDesc:
        type: string
        description: Merchant country code description
        example: 'UK'
      baseCurrencyCode:
        type: string
        description: Merchant base currency code
        example: 'GBP'
      baseCurrencyCodeDesc:
        type: string
        description: Merchant base currency code description
        example: 'POUND'
      taxId:
        type: string
        description: Merchant tax id (CNPJ/CPF)
        example: 'GBUNKNOWN'
      regionalTaxId:
        type: string
        description: Merchant regional tax id
        example: '535345'
      mccCode:
        type: string
        description: Merchant MCC code
        example: '7539'
      mccCodeDesc:
        type: string
        description: Merchant MCC code description
        example: 'UK'
      bussType:
        type: string
        description: Merchant Buss Type
        example: 'U'
      bussTypeDesc:
        type: string
        description: Merchant Buss Type description
        example: 'BUS TYPE DESC'
      merchantDesc:
        type: string
        description: Merchant description
        example: 'MER DESC'
      merchantTitle:
        type: string
        description: Merchant title
        example: 'TITLE'
      merchantStatusIndicator:
        type: string
        description: Merchant status indicator
        example: '16'
      email:
        type: string
        description: Merchant email
        example: 'testuser@gmail.com'
      phoneNumber:
        type: string
        description: Merchant phone number
        example: '01493717273'
      privatePhoneNumber:
        type: string
        description: Merchant private phone number
        example: '019940123965'
      workPhoneNumber:
        type: string
        description: Merchant work phone number
        example: '018807453540'
      servicePhoneNumber:
        type: string
        description: Merchant service phone number
        example: '01493717283'
      groupNumber:
        type: string
        description: Merchant group number
        example: '12456'
      amendmentDate:
        type: string
        format: date-time
        description: Merchant amendment date
        example: '2018-08-09T17:17:27Z'
      legalForm:
        type: string
        description: Merchant legal form
        example: 'LEGAL FORM'
      regionalIndustryCode:
        type: string
        description: Merchant regional industry code
        example: 'D'
      regionalIndustryCodeDesc:
        type: string
        description: Merchant regional industry code description
        example: 'Industry Code Desc'
      ecommerceIndicator:
        type: string
        description: Merchant e-commerce indicator
        example: 'I'
      recurringTransactionIndicator:
        type: string
        description: Merchant recurring transaction indicator
        example: 'Indicator'
      website:
        type: string
        description: Merchant website
        example: 'www.firstdata.com'
      contractStatus:
        type: string
        description: Merchant contract status
        example: 'Contract Status'
      contractStatusDesc:
        type: string
        description: Merchant contract status code description
        example: 'Contract Desc'
      contractReasonCode:
        type: string
        description: Merchant contract reason code
        example: 'Contract Reason Code'
      contractReasonCodeDesc:
        type: string
        description: Merchant contract reason code description
        example: 'Contract Reason Code Desc'
      serviceContractCode:
        type: string
        description: Merchant service contract code
        example: 'Service Contract Code'
      serviceContractCodeDesc:
        type: string
        description: Merchant service contract code description
        example: 'Service Contract Code Desc'
      collectionStatus:
        type: string
        description: Merchant collection status
        example: 'Collection Status'
      collectionStatusDesc:
        type: string
        description: Merchant collection status description
        example: 'Collection Status Desc'
      salesCategoryCode:
        type: string
        description: Merchant sales category code
        example: 'Sales Cat Code'
      salesCategoryCodeDesc:
        type: string
        description: Merchant sales category code description
        example: 'Sales Cat Code Desc'
      parentOmnipaySystemNumber:
        type: string
        description: Merchant parent omnipay system number
        example: '453345388'
      parentGroupNumber:
        type: string
        description: Merchant parent group number
        example: '324324324'
      fraudIndicator:
        type: string
        description: Merchant fraud indicator
        example: 'F'
      prepaymentIndicator:
        type: string
        description: Merchant prepayment indicator
        example: 'E'
      prepaymentStartDate:
        type: string
        format: date-time
        description: Merchant prepayment start date
        example: '2019-01-04T10:37:36Z'
      prepaymentReservePercent:
        type: number
        description: Merchant prepayment reserve percent
        example: 43
      clientType:
        type: string
        description: Merchant client type
        example: 'Client Type'
      clientTypeDesc:
        type: string
        description: Merchant client type description
        example: 'Client Type Desc'
      merchantIdType:
        type: string
        description: Merchant id type
        example: '19'
      hierarchyParentId:
        type: integer
        format: int64
        description: Id of Merchant hierarchy parent
        example: 1230708
      hierarchyInvoicingGroup:
        type: integer
        format: int64
        description: Id of Merchant hierarchy invoicing group
        example: 435435435
      hierarchySettlementGroup:
        type: integer
        format: int64
        description: Id of Merchant hierarchy settlement group
        example: 65657657
      hierarchyLevel:
        type: object
        additionalProperties:
          type: integer
          format: int64
          example: 'LVL1: 1187619668'
      hierarchyAux:
        type: object
        additionalProperties:
          type: string
          example: 'AUX1: 1187619668'
      merchantId:
        type: integer
        format: int64
        description: Id of Merchant
        example: 1187594662
  MerchantListResponse:
    title: MerchantListResponse
    type: object
    properties:
      meta:
        $ref: '#/definitions/CommonResponse'
        description: Pagination related details
      data:
        type: array
        items:
          $ref: '#/definitions/Merchant'
        description: List of Merchants
  CommonResponse:
    type: object
    discriminator: pageSize
    properties:
      actualPageNumber:
        type: integer
        format: int32
        description: Actual page number
        example: 1
      actualPageSize:
        type: integer
        format: int32
        description: Actual page size
        example: 1
      pageSize:
        type: integer
        format: int32
        description: Page size
        example: 20
      hasNextPage:
        type: boolean
        description: Next page available
        example: true
      hasPreviousPage:
        type: boolean
        description: Previous page available
        example: false
  ErrorResponse:
    title: ErrorResponse
    type: object
    properties:
      timestamp:
        description: 'Error Occurred Timestamp'
        type: string
        format: date-time
        example: '2019-12-06T04:49:16.328+0000'
      status:
        description: 'Response code'
        type: integer
        format: int32
        example: 400
      error:
        description: 'Short description of the error. Not for displaying purposes '
        type: string
        example: 'Bad Request'
      message:
        description: 'Provides additional low-level details about the error to assist
                                with troubleshooting. Not for displaying purposes'
        type: string
        example: "Required String parameter 'allianceCode' is not present"
      path:
        description: 'Endpoint where Error Occurred'
        type: string
        example: "/merchants"
    required:
      - timestamp
      - status
      - error
      - message
      - path